<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Mz</title>
  <meta name="author" content="Mz">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Mz"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Mz" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Mz</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-08-28T11:26:10.439Z"><a href="/2016/08/28/5/">2016-08-28</a></time>
      
      
  
    <h1 class="title"><a href="/2016/08/28/5/"></a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="MVVM的数据绑定"><a href="#MVVM的数据绑定" class="headerlink" title="MVVM的数据绑定"></a>MVVM的数据绑定</h2><p> 在这个前端大爆发的年头，追着这些框架跑，真的好无力。angular、vue、react三个框架在领跑着，angular要出2.0了，vue也要2.0了，各种框架蓄势待发，好像潮流又要改一改的节奏。。。<br> 在这个对新手不友好的前端发展阶段，掌握一些核心才是关键。。。好的，我在扯淡，这是本人对mvvm的数据绑定的一些见解，请轻拍    </p>
<h4 id="angular1-x的检脏机制"><a href="#angular1-x的检脏机制" class="headerlink" title="angular1.x的检脏机制"></a>angular1.x的检脏机制</h4><p>先来看一些简单的例子</p>
<pre><code>&lt;body&gt;
&lt;span ng-bind = &quot;count&quot;&gt;&lt;/span&gt;
&lt;button ng-click = &quot;add&quot;&gt;+&lt;/button&gt;
&lt;button ng-click = &quot;minus&quot;&gt;-&lt;/button&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
var Scope = function(){
    var scope = this
    //绑定指令的函数
    var bind = function(){
        var click = document.querySelectorAll(&apos;[ng-click]&apos;)
        click.forEach(function(item){
            console.log(item.getAttribute(&apos;ng-click&apos;))
            item.onclick = (function(item){
                return function(){
                    scope[item.getAttribute(&apos;ng-click&apos;)]()
                    scope.$apply()
                }
            })(item)
        })
    }
    bind()
    //检脏函数
    scope.$apply = function () {
        var span = document.querySelectorAll(&apos;[ng-bind]&apos;)
        span.forEach(function(item){
            if (item.innerHTML!==scope[item.getAttribute(&apos;ng-bind&apos;)]) {
                item.innerHTML = scope[item.getAttribute(&apos;ng-bind&apos;)]
            }
        })
    }
    //加法
    scope.add = function () {
        scope.count++ 
    }
    //减法
    scope.minus = function () {
        scope.count-- 
    }
    //绑定的数
    scope.count = 0
    //初始化
    scope.$apply()
}
Scope()
&lt;/script&gt;
&lt;/body&gt;
</code></pre><p>以上就是简单的实现<br>利用bind函数来将ng-click这个指令分装，在为点击事件绑定相应的方法然后调用apply进行脏检测，而apply方法检测视图的值与js变量值是否一致，不一致则对其进行视图值进行刷新。基本的实现就完成了。<br>在Scope函数的最后加上一个settimeout函数试试</p>
<pre><code>scope.$apply() //原有的
//添加settimeout方法
setTimeout(function(){
    scope.count++
    console.log(scope.count)//1
},1000)
</code></pre><p>显然上面代码是不行的，虽然值改变了（控制台输出1）,但是页面值没有改变，为什么这样呢？嗯，是没有去检脏导致的，所以我们需要手动得去检脏</p>
<pre><code>scope.$apply() //原有的
//添加settimeout方法
setTimeout(function(){
    scope.count++
    console.log(scope.count)//1
    scope.$apply()
},1000)
</code></pre><p>嗯，一切按我们所预想的实现了，页面值也在延时后变化了，这就是angular1.x的检脏机制。<br>原则上就是当变量改变了，就要去调用一次apply，来进行检脏。angular也为此封装了很多指令和服务，为我们自动检脏，例如ng-click，$timeout等<br>现在试着编写一个双向数据绑定的例子</p>
<pre><code>&lt;body&gt;
&lt;span ng-bind = &quot;count&quot;&gt;&lt;/span&gt;
&lt;button ng-click = &quot;add&quot;&gt;+&lt;/button&gt;
&lt;button ng-click = &quot;minus&quot;&gt;-&lt;/button&gt;
&lt;input ng-model = &quot;count&quot;/&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
var Scope = function(){
    var scope = this
    //绑定指令的函数
    var bind = function(){
        var click = document.querySelectorAll(&apos;[ng-click]&apos;)
        click.forEach(function(item){
            console.log(item.getAttribute(&apos;ng-click&apos;))
            item.onclick = (function(item){
                return function(){
                    scope[item.getAttribute(&apos;ng-click&apos;)]()
                    scope.$apply()
                }
            })(item)
        })
        var input = document.querySelectorAll(&apos;[ng-model]&apos;)
        input.forEach(function(item){
            item.onkeyup = function(){
                scope[item.getAttribute(&apos;ng-model&apos;)] = item.value
                scope.$apply()
            }
            item.select = function(){
                scope[item.getAttribute(&apos;ng-model&apos;)] = item.value
                scope.$apply()
            }
        })
    }
    bind()
    //检脏函数
    scope.$apply = function () {
        var span = document.querySelectorAll(&apos;[ng-bind]&apos;)
        var input = document.querySelectorAll(&apos;[ng-model]&apos;)
        span.forEach(function(item){
            if (item.innerHTML!==scope[item.getAttribute(&apos;ng-bind&apos;)]) {
                item.innerHTML = scope[item.getAttribute(&apos;ng-bind&apos;)]
            }
        })
        input.forEach(function(item){
            if (item.value!==scope[item.getAttribute(&apos;ng-model&apos;)]) {
                item.value = scope[item.getAttribute(&apos;ng-model&apos;)]
            }
        })
    }
    //加法
    scope.add = function () {
        scope.count++ 
    }
    //减法
    scope.minus = function () {
        scope.count-- 
    }
    //绑定的数
    scope.count = 0
    //初始化
    scope.$apply()
    setTimeout(function(){
        scope.count++
        scope.$apply()
        console.log(scope.count)
    },1000)
}
Scope()
&lt;/script&gt;
&lt;/body&gt;
</code></pre><p>完美实现，这就是简单的双向数据绑定，利用input绑定事件来改变js的值，然后在检脏。<br>其实angular1.x里面的主要实现不一定和本文相符，它的双向绑定的事件也不是本文这样简单的keyup，select;<br>它主要是通过$compile来编译文本，把那些指令都给缓存起来，  这个模板引擎也会被编译成指令，而缓存的对象有视图值，变量值等属性，十分复杂，本文仅仅简单实现一下原理。。。</p>
<h4 id="vue的劫持get和set的方法"><a href="#vue的劫持get和set的方法" class="headerlink" title="vue的劫持get和set的方法"></a>vue的劫持get和set的方法</h4><p>先来说说Object.defineProperty<br>Object.defineProperty是ES5的一个特性，这也是为什么vue不支持IE8以下的理由。<br>Object.defineProperty(object, propertyname, descriptor)<br>object<br>必需。  要在其上添加或修改属性的对象。  这可能是一个本机 JavaScript 对象（即用户定义的对象或内置对象）或 DOM 对象。<br>propertyname<br>必需。  一个包含属性名称的字符串。<br>descriptor<br>必需。  属性描述符。  它可以针对数据属性或访问器属性。<br>来个栗子</p>
<pre><code>var test = { key:0 };
Object.defineProperty(test, &apos;key&apos;, {
    get: function() {
        console.log(&apos;get：&apos; + key);
        //do something
        return key;
    },
    set: function(value) {
        key = value;
        console.log(&apos;set:&apos; + key);
        //do something
    }
});
test.key = 2; // set:2
console.log(test.key); // get：2
</code></pre><p>从上面可以看出这个，每次访问或者操作一个对象的内容时都可以触发相应的回调函数（set,get）,这样实时监测对对象的操作，然后在do something执行设置好的监听函数之类的，进行数据的刷新。这样和检脏对比来说，性能可就好了很多，修改一个值，就刷新这个值所绑定的视图，而脏检测就只能遍历所有的新旧值。。。    但这仅限于对象，那在数组里面是怎样的呢，vue是直接把数组的原型给改了,对几个方法进行了封装。<br>请看下面这个栗子     </p>
<pre><code>Array.prototype.push_old = Array.prototype.push
delete Array.prototype[&apos;push&apos;]
Array.prototype.push = function  (data) {
    this.push_old(data)
    console.log(&apos;do somthing&apos;)
}
var arr = []
arr.push(2);  //do something
console.log(arr)  //[2]
arr.push([3])  //do something
console.log(arr)  //[2,[3]]
arr[1].push(3)  //do something
console.log(arr)  //[2,[3,3]]
</code></pre><p>这样就简单地把它封装好了，每次push之后，都可以执行相关的函数，把相应的视图进行刷新，很赞。但是vue可能并不是这么简单的玩起来。。下面是在别人blog抄来的一个vue源码节选</p>
<pre><code>const arrayProto = Array.prototype
export const arrayMethods = Object.create(arrayProto)
/**
 - Intercept mutating methods and emit events
 */
;[
  &apos;push&apos;,
  &apos;pop&apos;,
  &apos;shift&apos;,
  &apos;unshift&apos;,
  &apos;splice&apos;,
  &apos;sort&apos;,
  &apos;reverse&apos;
]
.forEach(function (method) {
  // cache original method
  var original = arrayProto[method]
  def(arrayMethods, method, function mutator () {
    // avoid leaking arguments:
    // http://jsperf.com/closure-with-arguments
    var i = arguments.length
    var args = new Array(i)
    while (i--) {
      args[i] = arguments[i]
    }
    var result = original.apply(this, args)
    var ob = this.__ob__
    var inserted
    switch (method) {
      case &apos;push&apos;:
        inserted = args
        break
      case &apos;unshift&apos;:
        inserted = args
        break
      case &apos;splice&apos;:
        inserted = args.slice(2)
        break
    }
    if (inserted) ob.observeArray(inserted)
    // notify change
    ob.dep.notify()
    return result
  })
})
</code></pre><p>vue把数组的几个方法改掉，用来可以触发监听的视图改变事件。但是这样子，还有一个问题，就是数组arr[1] = 0；这样的操作vue根本没办法检测到这样的操作发生。。为此 Vue.js 在文档中明确提示不建议直接角标修改数据，但也还是提供了一个$set方法来解决这个问题；其本质就是Array原型设置一个$set方法，类似angular的apply检脏；而且需要手动触发，也就是如果写了arr[1] = 0；然后又想要视图改变的话，手动执行$set方法。。  </p>
<h4 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h4><p>前端真的很有趣。。。</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-08-06T05:21:37.097Z"><a href="/2016/08/06/1/">2016-08-06</a></time>
      
      
  
    <h1 class="title"><a href="/2016/08/06/1/">AJAX 跨域实现</a></h1>
  

    </header>
    <div class="entry">
      
        <p>原生js实现跨域</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>想查看其它方法的 ajax 实现，可以看我上一篇文章</li>
<li>本例跨域是利用src属性来实现，为src属性添加链接后，无论是否跨域，浏览器都会去加载，由此来实现跨域<h3 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h3></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">//ajax.js 文件</div><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">Ajax</span></span> ()&#123;</div><div class="line">        //jsonp方法,利用callback=作为句柄,全局注册一个回调函数</div><div class="line">        //如果不希望全局污染，可以在window对象下建立一个命名空间</div><div class="line">        <span class="built_in">return</span>&#123;</div><div class="line">            jsonp:<span class="keyword">function</span>(url,callback)&#123;</div><div class="line">                window[url.split(<span class="string">'callback='</span>).pop()]=  callback;</div><div class="line">                var script = document.createElement(<span class="string">'script'</span>);</div><div class="line">                document.getElementsByTagName(<span class="string">'body'</span>)[0].appendChild(script);</div><div class="line">                script.setAttribute(<span class="string">'src'</span>,url);</div><div class="line">                script.onload = <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                    console.log(<span class="string">'跨域成功'</span>)</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line">//index.html文件,引入后实例</div><div class="line">var M = new Ajax()</div><div class="line">    M.jsonp(<span class="string">'./servers/json.php?callback=jsoncallback'</span>,<span class="keyword">function</span>(data)&#123;</div><div class="line">        console.log(data)</div><div class="line">    &#125;)</div><div class="line">//相应的服务端程序，本例只放出php</div><div class="line">//servers文件夹下json.php文件</div><div class="line">&lt;?php </div><div class="line">    <span class="variable">$callback</span> = <span class="variable">$_GET</span>[<span class="string">'callback'</span>];</div><div class="line">    <span class="built_in">echo</span> <span class="variable">$callback</span>.<span class="string">'(&#123;jsonp:"jsonp"&#125;)'</span>;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>




  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-07-26T13:17:58.127Z"><a href="/2016/07/26/4/">2016-07-26</a></time>
      
      
  
    <h1 class="title"><a href="/2016/07/26/4/">简易AJAX实现</a></h1>
  

    </header>
    <div class="entry">
      
        <p>原生js实现AJAX</p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><ul>
<li>基于浏览器的XHR对象来实现，所以首先了解下这个对象基本内容<br>  <strong> status 属性 :连接状态，会随连接状态自己改变，200状态是联通状态 
  </strong> readyState 属性 :连接状态属性，默认有4种状态<br>  <strong> responseText 属性 :用来装载返回内容的对象,在返回成功后，该值为返回的内容
  </strong> onreadystatechange 方法 :连接状态改变后会触发的回调函数<br>  <strong> open(method,url,true) 方法 :建立连接，定义method，url,还有是否异步，默认异步    
  </strong> send(data) 方法：发送内容data;open方法执行后建立连接，再用send方法发送<br>  ** setRequestHeader(key,value) 方法：设置发送的header，有重复则覆盖</li>
<li>其中基本的原理就是用onreadystatechange这个方法绑定回调函数，用来执行异步加载后的方法<h3 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h3></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">function</span> <span class="function"><span class="title">AJAX</span></span> ()&#123;</div><div class="line">    //实例ajax连接</div><div class="line">    var http = <span class="keyword">function</span> (url, content, method,callback,header) &#123;</div><div class="line">        var http_request ;</div><div class="line">        <span class="keyword">if</span> (window.XMLHttpRequest) &#123; // Mozilla, Safari,...</div><div class="line">            http_request = new XMLHttpRequest();</div><div class="line">            <span class="keyword">if</span> (http_request.overrideMimeType) &#123;</div><div class="line">                http_request.overrideMimeType(<span class="string">'text/xml'</span>);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (window.ActiveXObject) &#123; // IE</div><div class="line">            try &#123;</div><div class="line">                http_request = new ActiveXObject(<span class="string">"Msxml2.XMLHTTP"</span>);</div><div class="line">            &#125; catch (e) &#123;</div><div class="line">                try &#123;</div><div class="line">                http_request = new ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</div><div class="line">                &#125; catch (e) &#123;&#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!http_request) &#123;</div><div class="line">            console.log(<span class="string">'xhr实例不成功'</span>)</div><div class="line">            <span class="built_in">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">        //装饰方法,返回带callback的改变状态方法</div><div class="line">        var stateChangeHandler = <span class="keyword">function</span>(fun) &#123;</div><div class="line">            <span class="built_in">return</span> <span class="function"><span class="title">function</span></span>()&#123;</div><div class="line">                 <span class="keyword">if</span> (http_request.readyState == 4) &#123;</div><div class="line">                    <span class="keyword">if</span> (http_request.status == 200) &#123;</div><div class="line">                        <span class="keyword">if</span> (!fun) <span class="built_in">return</span>;</div><div class="line">                        fun(http_request.responseText);</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        alert(<span class="string">'There was a problem with the request.'</span>);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;  </div><div class="line">        &#125;</div><div class="line">        http_request.onreadystatechange = stateChangeHandler(callback);//绑定状态改变方法</div><div class="line">        http_request.open(method, url, <span class="literal">true</span>);//建立连接，定义方法，url，是否异步</div><div class="line">        <span class="keyword">if</span> (header) &#123;</div><div class="line">            <span class="keyword">for</span> (var i <span class="keyword">in</span> header) &#123;</div><div class="line">                http_request.setRequestHeader(i,header[i]);</div><div class="line">            &#125;  </div><div class="line">        &#125;</div><div class="line">        http_request.send(content);//发送内容</div><div class="line">    &#125; </div><div class="line">    <span class="built_in">return</span> &#123;</div><div class="line">        //post 方法,传输键值,但对非json</div><div class="line">        post:<span class="keyword">function</span>(url,data,callback)&#123;</div><div class="line">            try&#123;</div><div class="line">                <span class="keyword">if</span>(typeof data!=<span class="string">"object"</span>)    throw <span class="string">"not object"</span>;</div><div class="line">                var urlcode = <span class="string">""</span>;</div><div class="line">                <span class="keyword">for</span> (var i <span class="keyword">in</span> data) &#123;</div><div class="line">                    urlcode = urlcode + i + <span class="string">"="</span> + data[i] + <span class="string">"&amp;"</span>;</div><div class="line">                &#125;</div><div class="line">                urlcode = urlcode.substring(0,urlcode.length-1);</div><div class="line">                var header = &#123;<span class="string">"Content-Type"</span>:<span class="string">"application/x-www-form-urlencoded"</span>&#125;;</div><div class="line">                <span class="built_in">return</span> new http(url,urlcode,<span class="string">"post"</span>,callback,header);</div><div class="line">            &#125;</div><div class="line">            catch(err)&#123;</div><div class="line">                console.log(err)</div><div class="line">            &#125;            </div><div class="line">        &#125;,</div><div class="line">        //get 方法</div><div class="line">        get:<span class="keyword">function</span>(url,callback)&#123;</div><div class="line">            <span class="built_in">return</span> new http(url,<span class="string">""</span>,<span class="string">"get"</span>,callback);</div><div class="line">        &#125;,</div><div class="line">        //post方法传送json</div><div class="line">        json:<span class="keyword">function</span>(url,data,callback)&#123;</div><div class="line">            var header = &#123;<span class="string">'Content-Type'</span>:<span class="string">'application/json'</span>&#125;;</div><div class="line">            <span class="built_in">return</span> new http(url,JSON.stringify(data),<span class="string">"post"</span>,callback,header);</div><div class="line">        &#125;,</div><div class="line">        //可以设置header的ajax方法,默认所有数据不做处理</div><div class="line">        ajax:<span class="keyword">function</span>(url,header,data,method,callback)&#123;</div><div class="line">            <span class="built_in">return</span> new http(url,data,method,callback,header);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="这里说明一下，每个人都有自己的使用习惯，就像json方法，我该不该在js里面用JSON-stringify-？还是说应该留着让使用者自己来格式化成字符串呢？一个大神和我说过，自己做的东西和那些别人的框架最大的区别就是别人会考虑使用者的感受，而我们自只会随自己喜好。。。"><a href="#这里说明一下，每个人都有自己的使用习惯，就像json方法，我该不该在js里面用JSON-stringify-？还是说应该留着让使用者自己来格式化成字符串呢？一个大神和我说过，自己做的东西和那些别人的框架最大的区别就是别人会考虑使用者的感受，而我们自只会随自己喜好。。。" class="headerlink" title="这里说明一下，每个人都有自己的使用习惯，就像json方法，我该不该在js里面用JSON.stringify()？还是说应该留着让使用者自己来格式化成字符串呢？一个大神和我说过，自己做的东西和那些别人的框架最大的区别就是别人会考虑使用者的感受，而我们自只会随自己喜好。。。"></a>这里说明一下，每个人都有自己的使用习惯，就像json方法，我该不该在js里面用JSON.stringify()？还是说应该留着让使用者自己来格式化成字符串呢？一个大神和我说过，自己做的东西和那些别人的框架最大的区别就是别人会考虑使用者的感受，而我们自只会随自己喜好。。。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">//基本实例</div><div class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</div><div class="line">    var M = new AJAX();</div><div class="line">    var sendData = &#123; <span class="string">"name"</span>:<span class="string">"test"</span>,<span class="string">"password"</span>:<span class="string">"password"</span>,<span class="string">"uid"</span>:<span class="string">"uid"</span>&#125;;</div><div class="line">    var <span class="built_in">test</span>Data = &#123;<span class="string">"name"</span>:<span class="string">"test"</span>,<span class="string">"array"</span>:[<span class="string">"A"</span>,<span class="string">"B"</span>]&#125;;</div><div class="line">    M.post(<span class="string">"./servers/test.php"</span>,sendData,<span class="keyword">function</span> (data) &#123;</div><div class="line">        console.log(data)</div><div class="line">    &#125;)</div><div class="line">    M.get(<span class="string">"./servers/get.php?bookid=1"</span>,<span class="keyword">function</span> (data) &#123;</div><div class="line">        console.log(data)</div><div class="line">    &#125;)</div><div class="line">    M.json(<span class="string">"./servers/json.php"</span>,<span class="built_in">test</span>Data,<span class="keyword">function</span>(data)&#123;</div><div class="line">        console.log(data)</div><div class="line">    &#125;)</div><div class="line">    M.ajax(<span class="string">'./servers/json.php'</span>,&#123;<span class="string">'Content-Type'</span>:<span class="string">'application/json'</span>&#125;,JSON.stringify(<span class="built_in">test</span>Data),<span class="string">'post'</span>,<span class="keyword">function</span>(data)&#123;</div><div class="line">        console.log(data)</div><div class="line">    &#125;)</div><div class="line">&lt;/script&gt;</div><div class="line">//get.php</div><div class="line">&lt;?php </div><div class="line">    <span class="built_in">echo</span> json_encode(<span class="variable">$_GET</span>);</div><div class="line">?&gt;</div><div class="line">//json.php</div><div class="line">&lt;?php </div><div class="line">    <span class="variable">$json</span> = file_get_contents(<span class="string">"php://input"</span>);</div><div class="line">    <span class="built_in">echo</span> <span class="variable">$json</span>;</div><div class="line">?&gt;</div><div class="line">//post.php</div><div class="line">&lt;?php</div><div class="line">    <span class="built_in">echo</span> json_encode(<span class="variable">$_POST</span>);</div><div class="line">?&gt;</div></pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





<nav id="pagination">
  
  
    <a href="/page/2/" class="alignright next">Nächste Seite</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Suche">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  

  
</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2016 Mz
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
